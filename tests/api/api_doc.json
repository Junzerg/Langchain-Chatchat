{
    "openapi": "3.1.0",
    "info": {
        "title": "Langchain-Chatchat API Server",
        "version": "v0.0.1"
    },
    "paths": {
        "/": {
            "get": {
                "summary": "swagger 文档",
                "operationId": "document__get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/chat/chat": {
            "post": {
                "tags": [
                    "Chat"
                ],
                "summary": "与llm模型对话(通过LLMChain)",
                "operationId": "chat_chat_chat_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_chat_chat_chat_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/chat/search_engine_chat": {
            "post": {
                "tags": [
                    "Chat"
                ],
                "summary": "与搜索引擎对话",
                "operationId": "search_engine_chat_chat_search_engine_chat_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_search_engine_chat_chat_search_engine_chat_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/chat/feedback": {
            "post": {
                "tags": [
                    "Chat"
                ],
                "summary": "返回llm模型对话评分",
                "operationId": "chat_feedback_chat_feedback_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_chat_feedback_chat_feedback_post"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/chat/knowledge_base_chat": {
            "post": {
                "tags": [
                    "Chat"
                ],
                "summary": "与知识库对话",
                "operationId": "knowledge_base_chat_chat_knowledge_base_chat_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_knowledge_base_chat_chat_knowledge_base_chat_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/chat/file_chat": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "文件对话",
                "operationId": "file_chat_chat_file_chat_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_file_chat_chat_file_chat_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/chat/agent_chat": {
            "post": {
                "tags": [
                    "Chat"
                ],
                "summary": "与agent对话",
                "operationId": "agent_chat_chat_agent_chat_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_agent_chat_chat_agent_chat_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/list_knowledge_bases": {
            "get": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "获取知识库列表",
                "operationId": "list_kbs_knowledge_base_list_knowledge_bases_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ListResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/create_knowledge_base": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "创建知识库",
                "operationId": "create_kb_knowledge_base_create_knowledge_base_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_create_kb_knowledge_base_create_knowledge_base_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/delete_knowledge_base": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "删除知识库",
                "operationId": "delete_kb_knowledge_base_delete_knowledge_base_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "string",
                                "title": "Knowledge Base Name",
                                "examples": [
                                    "samples"
                                ]
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/list_files": {
            "get": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "获取知识库内的文件列表",
                "operationId": "list_files_knowledge_base_list_files_get",
                "parameters": [
                    {
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Knowledge Base Name"
                        },
                        "name": "knowledge_base_name",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ListResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/search_docs": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "搜索知识库",
                "operationId": "search_docs_knowledge_base_search_docs_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_search_docs_knowledge_base_search_docs_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "items": {
                                        "$ref": "#/components/schemas/DocumentWithVSId"
                                    },
                                    "type": "array",
                                    "title": "Response Search Docs Knowledge Base Search Docs Post"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/update_docs_by_id": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "直接更新知识库文档",
                "description": "按照文档 ID 更新文档内容",
                "operationId": "update_docs_by_id_knowledge_base_update_docs_by_id_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_update_docs_by_id_knowledge_base_update_docs_by_id_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/upload_docs": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "上传文件到知识库，并/或进行向量化",
                "description": "API接口：上传文件，并/或向量化",
                "operationId": "upload_docs_knowledge_base_upload_docs_post",
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_upload_docs_knowledge_base_upload_docs_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/delete_docs": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "删除知识库内指定文件",
                "operationId": "delete_docs_knowledge_base_delete_docs_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_delete_docs_knowledge_base_delete_docs_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/update_info": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "更新知识库介绍",
                "operationId": "update_info_knowledge_base_update_info_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_update_info_knowledge_base_update_info_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/update_docs": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "更新现有文件到知识库",
                "description": "更新知识库文档",
                "operationId": "update_docs_knowledge_base_update_docs_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_update_docs_knowledge_base_update_docs_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/download_doc": {
            "get": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "下载对应的知识文件",
                "description": "下载知识库文档",
                "operationId": "download_doc_knowledge_base_download_doc_get",
                "parameters": [
                    {
                        "description": "知识库名称",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Knowledge Base Name",
                            "description": "知识库名称",
                            "examples": [
                                "samples"
                            ]
                        },
                        "name": "knowledge_base_name",
                        "in": "query"
                    },
                    {
                        "description": "文件名称",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "File Name",
                            "description": "文件名称",
                            "examples": [
                                "test.txt"
                            ]
                        },
                        "name": "file_name",
                        "in": "query"
                    },
                    {
                        "description": "是：浏览器内预览；否：下载",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "title": "Preview",
                            "description": "是：浏览器内预览；否：下载",
                            "default": false
                        },
                        "name": "preview",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/recreate_vector_store": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "根据content中文档重建向量库，流式输出处理进度。",
                "description": "recreate vector store from the content.\nthis is usefull when user can copy files to content folder directly instead of upload through network.\nby default, get_service_by_name only return knowledge base in the info.db and having document files in it.\nset allow_empty_kb to True make it applied on empty knowledge base which it not in the info.db or having no documents.",
                "operationId": "recreate_vector_store_knowledge_base_recreate_vector_store_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_recreate_vector_store_knowledge_base_recreate_vector_store_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/upload_temp_docs": {
            "post": {
                "tags": [
                    "Knowledge Base Management"
                ],
                "summary": "上传文件到临时目录，用于文件对话。",
                "description": "将文件保存到临时目录，并进行向量化。\n返回临时目录名称作为ID，同时也是临时向量库的ID。",
                "operationId": "upload_temp_docs_knowledge_base_upload_temp_docs_post",
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_upload_temp_docs_knowledge_base_upload_temp_docs_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/kb_summary_api/summary_file_to_vector_store": {
            "post": {
                "tags": [
                    "Knowledge kb_summary_api Management"
                ],
                "summary": "单个知识库根据文件名称摘要",
                "description": "单个知识库根据文件名称摘要\n:param model_name:\n:param max_tokens:\n:param temperature:\n:param file_description:\n:param file_name:\n:param knowledge_base_name:\n:param allow_empty_kb:\n:param vs_type:\n:param embed_model:\n:return:",
                "operationId": "summary_file_to_vector_store_knowledge_base_kb_summary_api_summary_file_to_vector_store_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_summary_file_to_vector_store_knowledge_base_kb_summary_api_summary_file_to_vector_store_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/kb_summary_api/summary_doc_ids_to_vector_store": {
            "post": {
                "tags": [
                    "Knowledge kb_summary_api Management"
                ],
                "summary": "单个知识库根据doc_ids摘要",
                "description": "单个知识库根据doc_ids摘要\n:param knowledge_base_name:\n:param doc_ids:\n:param model_name:\n:param max_tokens:\n:param temperature:\n:param file_description:\n:param vs_type:\n:param embed_model:\n:return:",
                "operationId": "summary_doc_ids_to_vector_store_knowledge_base_kb_summary_api_summary_doc_ids_to_vector_store_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_summary_doc_ids_to_vector_store_knowledge_base_kb_summary_api_summary_doc_ids_to_vector_store_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/knowledge_base/kb_summary_api/recreate_summary_vector_store": {
            "post": {
                "tags": [
                    "Knowledge kb_summary_api Management"
                ],
                "summary": "重建单个知识库文件摘要",
                "description": "重建单个知识库文件摘要\n:param max_tokens:\n:param model_name:\n:param temperature:\n:param file_description:\n:param knowledge_base_name:\n:param allow_empty_kb:\n:param vs_type:\n:param embed_model:\n:return:",
                "operationId": "recreate_summary_vector_store_knowledge_base_kb_summary_api_recreate_summary_vector_store_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_recreate_summary_vector_store_knowledge_base_kb_summary_api_recreate_summary_vector_store_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/llm_model/list_running_models": {
            "post": {
                "tags": [
                    "LLM Model Management"
                ],
                "summary": "列出当前已加载的模型",
                "description": "从fastchat controller获取已加载模型列表及其配置项",
                "operationId": "list_running_models_llm_model_list_running_models_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_list_running_models_llm_model_list_running_models_post"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/llm_model/list_config_models": {
            "post": {
                "tags": [
                    "LLM Model Management"
                ],
                "summary": "列出configs已配置的模型",
                "description": "从本地获取configs中配置的模型列表",
                "operationId": "list_config_models_llm_model_list_config_models_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_list_config_models_llm_model_list_config_models_post"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/llm_model/get_model_config": {
            "post": {
                "tags": [
                    "LLM Model Management"
                ],
                "summary": "获取模型配置（合并后）",
                "description": "获取LLM模型配置项（合并后的）",
                "operationId": "get_model_config_llm_model_get_model_config_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_get_model_config_llm_model_get_model_config_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/llm_model/stop": {
            "post": {
                "tags": [
                    "LLM Model Management"
                ],
                "summary": "停止指定的LLM模型（Model Worker)",
                "description": "向fastchat controller请求停止某个LLM模型。\n注意：由于Fastchat的实现方式，实际上是把LLM模型所在的model_worker停掉。",
                "operationId": "stop_llm_model_llm_model_stop_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_stop_llm_model_llm_model_stop_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/llm_model/change": {
            "post": {
                "tags": [
                    "LLM Model Management"
                ],
                "summary": "切换指定的LLM模型（Model Worker)",
                "description": "向fastchat controller请求切换LLM模型。",
                "operationId": "change_llm_model_llm_model_change_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_change_llm_model_llm_model_change_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/server/configs": {
            "post": {
                "tags": [
                    "Server State"
                ],
                "summary": "获取服务器原始配置信息",
                "description": "获取configs中的原始配置项，供前端使用",
                "operationId": "get_server_configs_server_configs_post",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "title": "Response Get Server Configs Server Configs Post"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/server/list_search_engines": {
            "post": {
                "tags": [
                    "Server State"
                ],
                "summary": "获取服务器支持的搜索引擎",
                "operationId": "list_search_engines_server_list_search_engines_post",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/server/get_prompt_template": {
            "post": {
                "tags": [
                    "Server State"
                ],
                "summary": "获取服务区配置的 prompt 模板",
                "operationId": "get_server_prompt_template_server_get_prompt_template_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_get_server_prompt_template_server_get_prompt_template_post"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string",
                                    "title": "Response Get Server Prompt Template Server Get Prompt Template Post"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/other/completion": {
            "post": {
                "tags": [
                    "Other"
                ],
                "summary": "要求llm模型补全(通过LLMChain)",
                "operationId": "completion_other_completion_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_completion_other_completion_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/other/embed_texts": {
            "post": {
                "tags": [
                    "Other"
                ],
                "summary": "将文本向量化，支持本地模型和在线模型",
                "description": "对文本进行向量化，返回 BaseResponse(data=List[List[float]])",
                "operationId": "embed_texts_endpoint_other_embed_texts_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_embed_texts_endpoint_other_embed_texts_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BaseResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "BaseResponse": {
                "properties": {
                    "code": {
                        "type": "integer",
                        "title": "Code",
                        "description": "API status code",
                        "default": 200
                    },
                    "msg": {
                        "type": "string",
                        "title": "Msg",
                        "description": "API status message",
                        "default": "success"
                    },
                    "data": {
                        "title": "Data",
                        "description": "API data"
                    }
                },
                "type": "object",
                "title": "BaseResponse",
                "example": {
                    "code": 200,
                    "msg": "success"
                }
            },
            "Body_agent_chat_chat_agent_chat_post": {
                "properties": {
                    "query": {
                        "type": "string",
                        "title": "Query",
                        "description": "用户输入",
                        "examples": [
                            "恼羞成怒"
                        ]
                    },
                    "history": {
                        "items": {
                            "$ref": "#/components/schemas/History"
                        },
                        "type": "array",
                        "title": "History",
                        "description": "历史对话",
                        "default": [],
                        "examples": [
                            [
                                {
                                    "role": "user",
                                    "content": "请使用知识库工具查询今天北京天气"
                                },
                                {
                                    "role": "assistant",
                                    "content": "使用天气查询工具查询到今天北京多云，10-14摄氏度，东北风2级，易感冒"
                                }
                            ]
                        ]
                    },
                    "stream": {
                        "type": "boolean",
                        "title": "Stream",
                        "description": "流式输出",
                        "default": false
                    },
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "LLM 模型名称。",
                        "default": "openai-api"
                    },
                    "temperature": {
                        "type": "number",
                        "maximum": 1,
                        "minimum": 0,
                        "title": "Temperature",
                        "description": "LLM 采样温度",
                        "default": 0.7
                    },
                    "max_tokens": {
                        "type": "integer",
                        "title": "Max Tokens",
                        "description": "限制LLM生成Token数量，默认None代表模型最大值"
                    },
                    "prompt_name": {
                        "type": "string",
                        "title": "Prompt Name",
                        "description": "使用的prompt模板名称(在configs/prompt_config.py中配置)",
                        "default": "default"
                    }
                },
                "type": "object",
                "required": [
                    "query"
                ],
                "title": "Body_agent_chat_chat_agent_chat_post"
            },
            "Body_change_llm_model_llm_model_change_post": {
                "properties": {
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "当前运行模型",
                        "examples": [
                            "openai-api"
                        ]
                    },
                    "new_model_name": {
                        "type": "string",
                        "title": "New Model Name",
                        "description": "要切换的新模型",
                        "examples": [
                            "openai-api"
                        ]
                    },
                    "controller_address": {
                        "type": "string",
                        "title": "Controller Address",
                        "description": "Fastchat controller服务器地址",
                        "examples": [
                            "http://127.0.0.1:20001"
                        ]
                    }
                },
                "type": "object",
                "required": [
                    "model_name",
                    "new_model_name"
                ],
                "title": "Body_change_llm_model_llm_model_change_post"
            },
            "Body_chat_chat_chat_post": {
                "properties": {
                    "query": {
                        "type": "string",
                        "title": "Query",
                        "description": "用户输入",
                        "examples": [
                            "恼羞成怒"
                        ]
                    },
                    "conversation_id": {
                        "type": "string",
                        "title": "Conversation Id",
                        "description": "对话框ID",
                        "default": ""
                    },
                    "history_len": {
                        "type": "integer",
                        "title": "History Len",
                        "description": "从数据库中取历史消息的数量",
                        "default": -1
                    },
                    "history": {
                        "anyOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "items": {
                                    "$ref": "#/components/schemas/History"
                                },
                                "type": "array"
                            }
                        ],
                        "title": "History",
                        "description": "历史对话，设为一个整数可以从数据库中读取历史消息",
                        "default": [],
                        "examples": [
                            [
                                {
                                    "role": "user",
                                    "content": "我们来玩成语接龙，我先来，生龙活虎"
                                },
                                {
                                    "role": "assistant",
                                    "content": "虎头虎脑"
                                }
                            ]
                        ]
                    },
                    "stream": {
                        "type": "boolean",
                        "title": "Stream",
                        "description": "流式输出",
                        "default": false
                    },
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "LLM 模型名称。",
                        "default": "openai-api"
                    },
                    "temperature": {
                        "type": "number",
                        "maximum": 2,
                        "minimum": 0,
                        "title": "Temperature",
                        "description": "LLM 采样温度",
                        "default": 0.7
                    },
                    "max_tokens": {
                        "type": "integer",
                        "title": "Max Tokens",
                        "description": "限制LLM生成Token数量，默认None代表模型最大值"
                    },
                    "prompt_name": {
                        "type": "string",
                        "title": "Prompt Name",
                        "description": "使用的prompt模板名称(在configs/prompt_config.py中配置)",
                        "default": "default"
                    }
                },
                "type": "object",
                "required": [
                    "query"
                ],
                "title": "Body_chat_chat_chat_post"
            },
            "Body_chat_feedback_chat_feedback_post": {
                "properties": {
                    "message_id": {
                        "type": "string",
                        "maxLength": 32,
                        "title": "Message Id",
                        "description": "聊天记录id",
                        "default": ""
                    },
                    "score": {
                        "type": "integer",
                        "title": "Score",
                        "description": "用户评分，满分100，越大表示评价越高",
                        "default": 0,
                        "max": 100
                    },
                    "reason": {
                        "type": "string",
                        "title": "Reason",
                        "description": "用户评分理由，比如不符合事实等",
                        "default": ""
                    }
                },
                "type": "object",
                "title": "Body_chat_feedback_chat_feedback_post"
            },
            "Body_completion_other_completion_post": {
                "properties": {
                    "query": {
                        "type": "string",
                        "title": "Query",
                        "description": "用户输入",
                        "examples": [
                            "恼羞成怒"
                        ]
                    },
                    "stream": {
                        "type": "boolean",
                        "title": "Stream",
                        "description": "流式输出",
                        "default": false
                    },
                    "echo": {
                        "type": "boolean",
                        "title": "Echo",
                        "description": "除了输出之外，还回显输入",
                        "default": false
                    },
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "LLM 模型名称。",
                        "default": "openai-api"
                    },
                    "temperature": {
                        "type": "number",
                        "maximum": 1,
                        "minimum": 0,
                        "title": "Temperature",
                        "description": "LLM 采样温度",
                        "default": 0.7
                    },
                    "max_tokens": {
                        "type": "integer",
                        "title": "Max Tokens",
                        "description": "限制LLM生成Token数量，默认None代表模型最大值",
                        "default": 1024
                    },
                    "prompt_name": {
                        "type": "string",
                        "title": "Prompt Name",
                        "description": "使用的prompt模板名称(在configs/prompt_config.py中配置)",
                        "default": "default"
                    }
                },
                "type": "object",
                "required": [
                    "query"
                ],
                "title": "Body_completion_other_completion_post"
            },
            "Body_create_kb_knowledge_base_create_knowledge_base_post": {
                "properties": {
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "examples": [
                            "samples"
                        ]
                    },
                    "vector_store_type": {
                        "type": "string",
                        "title": "Vector Store Type",
                        "default": "faiss"
                    },
                    "embed_model": {
                        "type": "string",
                        "title": "Embed Model",
                        "default": "bge-large-zh-v1.5"
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_name"
                ],
                "title": "Body_create_kb_knowledge_base_create_knowledge_base_post"
            },
            "Body_delete_docs_knowledge_base_delete_docs_post": {
                "properties": {
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "examples": [
                            "samples"
                        ]
                    },
                    "file_names": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "File Names",
                        "examples": [
                            [
                                "file_name.md",
                                "test.txt"
                            ]
                        ]
                    },
                    "delete_content": {
                        "type": "boolean",
                        "title": "Delete Content",
                        "default": false
                    },
                    "not_refresh_vs_cache": {
                        "type": "boolean",
                        "title": "Not Refresh Vs Cache",
                        "description": "暂不保存向量库（用于FAISS）",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_name",
                    "file_names"
                ],
                "title": "Body_delete_docs_knowledge_base_delete_docs_post"
            },
            "Body_embed_texts_endpoint_other_embed_texts_post": {
                "properties": {
                    "texts": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "Texts",
                        "description": "要嵌入的文本列表",
                        "examples": [
                            [
                                "hello",
                                "world"
                            ]
                        ]
                    },
                    "embed_model": {
                        "type": "string",
                        "title": "Embed Model",
                        "description": "使用的嵌入模型，除了本地部署的Embedding模型，也支持在线API(['minimax-api', 'qianfan-api', 'qwen-api'])提供的嵌入服务。",
                        "default": "bge-large-zh-v1.5"
                    },
                    "to_query": {
                        "type": "boolean",
                        "title": "To Query",
                        "description": "向量是否用于查询。有些模型如Minimax对存储/查询的向量进行了区分优化。",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "texts"
                ],
                "title": "Body_embed_texts_endpoint_other_embed_texts_post"
            },
            "Body_file_chat_chat_file_chat_post": {
                "properties": {
                    "query": {
                        "type": "string",
                        "title": "Query",
                        "description": "用户输入",
                        "examples": [
                            "你好"
                        ]
                    },
                    "knowledge_id": {
                        "type": "string",
                        "title": "Knowledge Id",
                        "description": "临时知识库ID"
                    },
                    "top_k": {
                        "type": "integer",
                        "title": "Top K",
                        "description": "匹配向量数",
                        "default": 3
                    },
                    "score_threshold": {
                        "type": "number",
                        "maximum": 2,
                        "minimum": 0,
                        "title": "Score Threshold",
                        "description": "知识库匹配相关度阈值，取值范围在0-1之间，SCORE越小，相关度越高，取到1相当于不筛选，建议设置在0.5左右",
                        "default": 1
                    },
                    "history": {
                        "items": {
                            "$ref": "#/components/schemas/History"
                        },
                        "type": "array",
                        "title": "History",
                        "description": "历史对话",
                        "default": [],
                        "examples": [
                            [
                                {
                                    "role": "user",
                                    "content": "我们来玩成语接龙，我先来，生龙活虎"
                                },
                                {
                                    "role": "assistant",
                                    "content": "虎头虎脑"
                                }
                            ]
                        ]
                    },
                    "stream": {
                        "type": "boolean",
                        "title": "Stream",
                        "description": "流式输出",
                        "default": false
                    },
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "LLM 模型名称。",
                        "default": "openai-api"
                    },
                    "temperature": {
                        "type": "number",
                        "maximum": 1,
                        "minimum": 0,
                        "title": "Temperature",
                        "description": "LLM 采样温度",
                        "default": 0.7
                    },
                    "max_tokens": {
                        "type": "integer",
                        "title": "Max Tokens",
                        "description": "限制LLM生成Token数量，默认None代表模型最大值"
                    },
                    "prompt_name": {
                        "type": "string",
                        "title": "Prompt Name",
                        "description": "使用的prompt模板名称(在configs/prompt_config.py中配置)",
                        "default": "default"
                    }
                },
                "type": "object",
                "required": [
                    "query",
                    "knowledge_id"
                ],
                "title": "Body_file_chat_chat_file_chat_post"
            },
            "Body_get_model_config_llm_model_get_model_config_post": {
                "properties": {
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "配置中LLM模型的名称"
                    },
                    "placeholder": {
                        "type": "string",
                        "title": "Placeholder",
                        "description": "占位用，无实际效果"
                    }
                },
                "type": "object",
                "required": [
                    "model_name"
                ],
                "title": "Body_get_model_config_llm_model_get_model_config_post"
            },
            "Body_get_server_prompt_template_server_get_prompt_template_post": {
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "llm_chat",
                            "knowledge_base_chat",
                            "search_engine_chat",
                            "agent_chat"
                        ],
                        "title": "Type",
                        "description": "模板类型，可选值：llm_chat，knowledge_base_chat，search_engine_chat，agent_chat",
                        "default": "llm_chat"
                    },
                    "name": {
                        "type": "string",
                        "title": "Name",
                        "description": "模板名称",
                        "default": "default"
                    }
                },
                "type": "object",
                "title": "Body_get_server_prompt_template_server_get_prompt_template_post"
            },
            "Body_knowledge_base_chat_chat_knowledge_base_chat_post": {
                "properties": {
                    "query": {
                        "type": "string",
                        "title": "Query",
                        "description": "用户输入",
                        "examples": [
                            "你好"
                        ]
                    },
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "description": "知识库名称",
                        "examples": [
                            "samples"
                        ]
                    },
                    "top_k": {
                        "type": "integer",
                        "title": "Top K",
                        "description": "匹配向量数",
                        "default": 3
                    },
                    "score_threshold": {
                        "type": "number",
                        "maximum": 2,
                        "minimum": 0,
                        "title": "Score Threshold",
                        "description": "知识库匹配相关度阈值，取值范围在0-1之间，SCORE越小，相关度越高，取到1相当于不筛选，建议设置在0.5左右",
                        "default": 1
                    },
                    "history": {
                        "items": {
                            "$ref": "#/components/schemas/History"
                        },
                        "type": "array",
                        "title": "History",
                        "description": "历史对话",
                        "default": [],
                        "examples": [
                            [
                                {
                                    "role": "user",
                                    "content": "我们来玩成语接龙，我先来，生龙活虎"
                                },
                                {
                                    "role": "assistant",
                                    "content": "虎头虎脑"
                                }
                            ]
                        ]
                    },
                    "stream": {
                        "type": "boolean",
                        "title": "Stream",
                        "description": "流式输出",
                        "default": false
                    },
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "LLM 模型名称。",
                        "default": "openai-api"
                    },
                    "temperature": {
                        "type": "number",
                        "maximum": 1,
                        "minimum": 0,
                        "title": "Temperature",
                        "description": "LLM 采样温度",
                        "default": 0.7
                    },
                    "max_tokens": {
                        "type": "integer",
                        "title": "Max Tokens",
                        "description": "限制LLM生成Token数量，默认None代表模型最大值"
                    },
                    "prompt_name": {
                        "type": "string",
                        "title": "Prompt Name",
                        "description": "使用的prompt模板名称(在configs/prompt_config.py中配置)",
                        "default": "default"
                    }
                },
                "type": "object",
                "required": [
                    "query",
                    "knowledge_base_name"
                ],
                "title": "Body_knowledge_base_chat_chat_knowledge_base_chat_post"
            },
            "Body_list_config_models_llm_model_list_config_models_post": {
                "properties": {
                    "types": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "Types",
                        "description": "模型配置项类别，如local, online, worker",
                        "default": [
                            "local",
                            "online"
                        ]
                    },
                    "placeholder": {
                        "type": "string",
                        "title": "Placeholder",
                        "description": "占位用，无实际效果"
                    }
                },
                "type": "object",
                "title": "Body_list_config_models_llm_model_list_config_models_post"
            },
            "Body_list_running_models_llm_model_list_running_models_post": {
                "properties": {
                    "controller_address": {
                        "type": "string",
                        "title": "Controller Address",
                        "description": "Fastchat controller服务器地址",
                        "examples": [
                            "http://127.0.0.1:20001"
                        ]
                    },
                    "placeholder": {
                        "type": "string",
                        "title": "Placeholder",
                        "description": "该参数未使用，占位用"
                    }
                },
                "type": "object",
                "title": "Body_list_running_models_llm_model_list_running_models_post"
            },
            "Body_recreate_summary_vector_store_knowledge_base_kb_summary_api_recreate_summary_vector_store_post": {
                "properties": {
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "examples": [
                            "samples"
                        ]
                    },
                    "allow_empty_kb": {
                        "type": "boolean",
                        "title": "Allow Empty Kb",
                        "default": true
                    },
                    "vs_type": {
                        "type": "string",
                        "title": "Vs Type",
                        "default": "faiss"
                    },
                    "embed_model": {
                        "type": "string",
                        "title": "Embed Model",
                        "default": "bge-large-zh-v1.5"
                    },
                    "file_description": {
                        "type": "string",
                        "title": "File Description",
                        "default": ""
                    },
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "LLM 模型名称。",
                        "default": "openai-api"
                    },
                    "temperature": {
                        "type": "number",
                        "maximum": 1,
                        "minimum": 0,
                        "title": "Temperature",
                        "description": "LLM 采样温度",
                        "default": 0.7
                    },
                    "max_tokens": {
                        "type": "integer",
                        "title": "Max Tokens",
                        "description": "限制LLM生成Token数量，默认None代表模型最大值"
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_name"
                ],
                "title": "Body_recreate_summary_vector_store_knowledge_base_kb_summary_api_recreate_summary_vector_store_post"
            },
            "Body_recreate_vector_store_knowledge_base_recreate_vector_store_post": {
                "properties": {
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "examples": [
                            "samples"
                        ]
                    },
                    "allow_empty_kb": {
                        "type": "boolean",
                        "title": "Allow Empty Kb",
                        "default": true
                    },
                    "vs_type": {
                        "type": "string",
                        "title": "Vs Type",
                        "default": "faiss"
                    },
                    "embed_model": {
                        "type": "string",
                        "title": "Embed Model",
                        "default": "bge-large-zh-v1.5"
                    },
                    "chunk_size": {
                        "type": "integer",
                        "title": "Chunk Size",
                        "description": "知识库中单段文本最大长度",
                        "default": 250
                    },
                    "chunk_overlap": {
                        "type": "integer",
                        "title": "Chunk Overlap",
                        "description": "知识库中相邻文本重合长度",
                        "default": 50
                    },
                    "zh_title_enhance": {
                        "type": "boolean",
                        "title": "Zh Title Enhance",
                        "description": "是否开启中文标题加强",
                        "default": false
                    },
                    "not_refresh_vs_cache": {
                        "type": "boolean",
                        "title": "Not Refresh Vs Cache",
                        "description": "暂不保存向量库（用于FAISS）",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_name"
                ],
                "title": "Body_recreate_vector_store_knowledge_base_recreate_vector_store_post"
            },
            "Body_search_docs_knowledge_base_search_docs_post": {
                "properties": {
                    "query": {
                        "type": "string",
                        "title": "Query",
                        "description": "用户输入",
                        "default": "",
                        "examples": [
                            "你好"
                        ]
                    },
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "description": "知识库名称",
                        "examples": [
                            "samples"
                        ]
                    },
                    "top_k": {
                        "type": "integer",
                        "title": "Top K",
                        "description": "匹配向量数",
                        "default": 3
                    },
                    "score_threshold": {
                        "type": "number",
                        "maximum": 1,
                        "minimum": 0,
                        "title": "Score Threshold",
                        "description": "知识库匹配相关度阈值，取值范围在0-1之间，SCORE越小，相关度越高，取到1相当于不筛选，建议设置在0.5左右",
                        "default": 1
                    },
                    "file_name": {
                        "type": "string",
                        "title": "File Name",
                        "description": "文件名称，支持 sql 通配符",
                        "default": ""
                    },
                    "metadata": {
                        "type": "object",
                        "title": "Metadata",
                        "description": "根据 metadata 进行过滤，仅支持一级键",
                        "default": {}
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_name"
                ],
                "title": "Body_search_docs_knowledge_base_search_docs_post"
            },
            "Body_search_engine_chat_chat_search_engine_chat_post": {
                "properties": {
                    "query": {
                        "type": "string",
                        "title": "Query",
                        "description": "用户输入",
                        "examples": [
                            "你好"
                        ]
                    },
                    "search_engine_name": {
                        "type": "string",
                        "title": "Search Engine Name",
                        "description": "搜索引擎名称",
                        "examples": [
                            "duckduckgo"
                        ]
                    },
                    "top_k": {
                        "type": "integer",
                        "title": "Top K",
                        "description": "检索结果数量",
                        "default": 3
                    },
                    "history": {
                        "items": {
                            "$ref": "#/components/schemas/History"
                        },
                        "type": "array",
                        "title": "History",
                        "description": "历史对话",
                        "default": [],
                        "examples": [
                            [
                                {
                                    "role": "user",
                                    "content": "我们来玩成语接龙，我先来，生龙活虎"
                                },
                                {
                                    "role": "assistant",
                                    "content": "虎头虎脑"
                                }
                            ]
                        ]
                    },
                    "stream": {
                        "type": "boolean",
                        "title": "Stream",
                        "description": "流式输出",
                        "default": false
                    },
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "LLM 模型名称。",
                        "default": "openai-api"
                    },
                    "temperature": {
                        "type": "number",
                        "maximum": 1,
                        "minimum": 0,
                        "title": "Temperature",
                        "description": "LLM 采样温度",
                        "default": 0.7
                    },
                    "max_tokens": {
                        "type": "integer",
                        "title": "Max Tokens",
                        "description": "限制LLM生成Token数量，默认None代表模型最大值"
                    },
                    "prompt_name": {
                        "type": "string",
                        "title": "Prompt Name",
                        "description": "使用的prompt模板名称(在configs/prompt_config.py中配置)",
                        "default": "default"
                    },
                    "split_result": {
                        "type": "boolean",
                        "title": "Split Result",
                        "description": "是否对搜索结果进行拆分（主要用于metaphor搜索引擎）",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "query",
                    "search_engine_name"
                ],
                "title": "Body_search_engine_chat_chat_search_engine_chat_post"
            },
            "Body_stop_llm_model_llm_model_stop_post": {
                "properties": {
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "要停止的LLM模型名称",
                        "examples": [
                            "openai-api"
                        ]
                    },
                    "controller_address": {
                        "type": "string",
                        "title": "Controller Address",
                        "description": "Fastchat controller服务器地址",
                        "examples": [
                            "http://127.0.0.1:20001"
                        ]
                    }
                },
                "type": "object",
                "required": [
                    "model_name"
                ],
                "title": "Body_stop_llm_model_llm_model_stop_post"
            },
            "Body_summary_doc_ids_to_vector_store_knowledge_base_kb_summary_api_summary_doc_ids_to_vector_store_post": {
                "properties": {
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "examples": [
                            "samples"
                        ]
                    },
                    "doc_ids": {
                        "items": {},
                        "type": "array",
                        "title": "Doc Ids",
                        "default": [],
                        "examples": [
                            [
                                "uuid"
                            ]
                        ]
                    },
                    "vs_type": {
                        "type": "string",
                        "title": "Vs Type",
                        "default": "faiss"
                    },
                    "embed_model": {
                        "type": "string",
                        "title": "Embed Model",
                        "default": "bge-large-zh-v1.5"
                    },
                    "file_description": {
                        "type": "string",
                        "title": "File Description",
                        "default": ""
                    },
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "LLM 模型名称。",
                        "default": "openai-api"
                    },
                    "temperature": {
                        "type": "number",
                        "maximum": 1,
                        "minimum": 0,
                        "title": "Temperature",
                        "description": "LLM 采样温度",
                        "default": 0.7
                    },
                    "max_tokens": {
                        "type": "integer",
                        "title": "Max Tokens",
                        "description": "限制LLM生成Token数量，默认None代表模型最大值"
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_name"
                ],
                "title": "Body_summary_doc_ids_to_vector_store_knowledge_base_kb_summary_api_summary_doc_ids_to_vector_store_post"
            },
            "Body_summary_file_to_vector_store_knowledge_base_kb_summary_api_summary_file_to_vector_store_post": {
                "properties": {
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "examples": [
                            "samples"
                        ]
                    },
                    "file_name": {
                        "type": "string",
                        "title": "File Name",
                        "examples": [
                            "test.pdf"
                        ]
                    },
                    "allow_empty_kb": {
                        "type": "boolean",
                        "title": "Allow Empty Kb",
                        "default": true
                    },
                    "vs_type": {
                        "type": "string",
                        "title": "Vs Type",
                        "default": "faiss"
                    },
                    "embed_model": {
                        "type": "string",
                        "title": "Embed Model",
                        "default": "bge-large-zh-v1.5"
                    },
                    "file_description": {
                        "type": "string",
                        "title": "File Description",
                        "default": ""
                    },
                    "model_name": {
                        "type": "string",
                        "title": "Model Name",
                        "description": "LLM 模型名称。",
                        "default": "openai-api"
                    },
                    "temperature": {
                        "type": "number",
                        "maximum": 1,
                        "minimum": 0,
                        "title": "Temperature",
                        "description": "LLM 采样温度",
                        "default": 0.7
                    },
                    "max_tokens": {
                        "type": "integer",
                        "title": "Max Tokens",
                        "description": "限制LLM生成Token数量，默认None代表模型最大值"
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_name",
                    "file_name"
                ],
                "title": "Body_summary_file_to_vector_store_knowledge_base_kb_summary_api_summary_file_to_vector_store_post"
            },
            "Body_update_docs_by_id_knowledge_base_update_docs_by_id_post": {
                "properties": {
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "description": "知识库名称",
                        "examples": [
                            "samples"
                        ]
                    },
                    "docs": {
                        "additionalProperties": {
                            "$ref": "#/components/schemas/Document"
                        },
                        "type": "object",
                        "title": "Docs",
                        "description": "要更新的文档内容，形如：{id: Document, ...}"
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_name",
                    "docs"
                ],
                "title": "Body_update_docs_by_id_knowledge_base_update_docs_by_id_post"
            },
            "Body_update_docs_knowledge_base_update_docs_post": {
                "properties": {
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "description": "知识库名称",
                        "examples": [
                            "samples"
                        ]
                    },
                    "file_names": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "File Names",
                        "description": "文件名称，支持多文件",
                        "examples": [
                            [
                                "file_name1",
                                "text.txt"
                            ]
                        ]
                    },
                    "chunk_size": {
                        "type": "integer",
                        "title": "Chunk Size",
                        "description": "知识库中单段文本最大长度",
                        "default": 250
                    },
                    "chunk_overlap": {
                        "type": "integer",
                        "title": "Chunk Overlap",
                        "description": "知识库中相邻文本重合长度",
                        "default": 50
                    },
                    "zh_title_enhance": {
                        "type": "boolean",
                        "title": "Zh Title Enhance",
                        "description": "是否开启中文标题加强",
                        "default": false
                    },
                    "override_custom_docs": {
                        "type": "boolean",
                        "title": "Override Custom Docs",
                        "description": "是否覆盖之前自定义的docs",
                        "default": false
                    },
                    "docs": {
                        "type": "string",
                        "format": "json-string",
                        "title": "Docs",
                        "description": "自定义的docs，需要转为json字符串",
                        "default": {},
                        "examples": [
                            {
                                "test.txt": [
                                    {
                                        "page_content": "custom doc",
                                        "metadata": {},
                                        "type": "Document"
                                    }
                                ]
                            }
                        ]
                    },
                    "not_refresh_vs_cache": {
                        "type": "boolean",
                        "title": "Not Refresh Vs Cache",
                        "description": "暂不保存向量库（用于FAISS）",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_name",
                    "file_names"
                ],
                "title": "Body_update_docs_knowledge_base_update_docs_post"
            },
            "Body_update_info_knowledge_base_update_info_post": {
                "properties": {
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "description": "知识库名称",
                        "examples": [
                            "samples"
                        ]
                    },
                    "kb_info": {
                        "type": "string",
                        "title": "Kb Info",
                        "description": "知识库介绍",
                        "examples": [
                            "这是一个知识库"
                        ]
                    }
                },
                "type": "object",
                "required": [
                    "knowledge_base_name",
                    "kb_info"
                ],
                "title": "Body_update_info_knowledge_base_update_info_post"
            },
            "Body_upload_docs_knowledge_base_upload_docs_post": {
                "properties": {
                    "files": {
                        "items": {
                            "type": "string",
                            "format": "binary"
                        },
                        "type": "array",
                        "title": "Files",
                        "description": "上传文件，支持多文件"
                    },
                    "knowledge_base_name": {
                        "type": "string",
                        "title": "Knowledge Base Name",
                        "description": "知识库名称",
                        "examples": [
                            "samples"
                        ]
                    },
                    "override": {
                        "type": "boolean",
                        "title": "Override",
                        "description": "覆盖已有文件",
                        "default": false
                    },
                    "to_vector_store": {
                        "type": "boolean",
                        "title": "To Vector Store",
                        "description": "上传文件后是否进行向量化",
                        "default": true
                    },
                    "chunk_size": {
                        "type": "integer",
                        "title": "Chunk Size",
                        "description": "知识库中单段文本最大长度",
                        "default": 250
                    },
                    "chunk_overlap": {
                        "type": "integer",
                        "title": "Chunk Overlap",
                        "description": "知识库中相邻文本重合长度",
                        "default": 50
                    },
                    "zh_title_enhance": {
                        "type": "boolean",
                        "title": "Zh Title Enhance",
                        "description": "是否开启中文标题加强",
                        "default": false
                    },
                    "docs": {
                        "type": "string",
                        "format": "json-string",
                        "title": "Docs",
                        "description": "自定义的docs，需要转为json字符串",
                        "default": {},
                        "examples": [
                            {
                                "test.txt": [
                                    {
                                        "page_content": "custom doc",
                                        "metadata": {},
                                        "type": "Document"
                                    }
                                ]
                            }
                        ]
                    },
                    "not_refresh_vs_cache": {
                        "type": "boolean",
                        "title": "Not Refresh Vs Cache",
                        "description": "暂不保存向量库（用于FAISS）",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "files",
                    "knowledge_base_name"
                ],
                "title": "Body_upload_docs_knowledge_base_upload_docs_post"
            },
            "Body_upload_temp_docs_knowledge_base_upload_temp_docs_post": {
                "properties": {
                    "files": {
                        "items": {
                            "type": "string",
                            "format": "binary"
                        },
                        "type": "array",
                        "title": "Files",
                        "description": "上传文件，支持多文件"
                    },
                    "prev_id": {
                        "type": "string",
                        "title": "Prev Id",
                        "description": "前知识库ID"
                    },
                    "chunk_size": {
                        "type": "integer",
                        "title": "Chunk Size",
                        "description": "知识库中单段文本最大长度",
                        "default": 250
                    },
                    "chunk_overlap": {
                        "type": "integer",
                        "title": "Chunk Overlap",
                        "description": "知识库中相邻文本重合长度",
                        "default": 50
                    },
                    "zh_title_enhance": {
                        "type": "boolean",
                        "title": "Zh Title Enhance",
                        "description": "是否开启中文标题加强",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "files"
                ],
                "title": "Body_upload_temp_docs_knowledge_base_upload_temp_docs_post"
            },
            "Document": {
                "properties": {
                    "page_content": {
                        "type": "string",
                        "title": "Page Content"
                    },
                    "metadata": {
                        "type": "object",
                        "title": "Metadata"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "Document"
                        ],
                        "title": "Type",
                        "default": "Document"
                    }
                },
                "type": "object",
                "required": [
                    "page_content"
                ],
                "title": "Document",
                "description": "Class for storing a piece of text and associated metadata."
            },
            "DocumentWithVSId": {
                "properties": {
                    "page_content": {
                        "type": "string",
                        "title": "Page Content"
                    },
                    "metadata": {
                        "type": "object",
                        "title": "Metadata"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "Document"
                        ],
                        "title": "Type",
                        "default": "Document"
                    },
                    "id": {
                        "type": "string",
                        "title": "Id"
                    },
                    "score": {
                        "type": "number",
                        "title": "Score",
                        "default": 3
                    }
                },
                "type": "object",
                "required": [
                    "page_content"
                ],
                "title": "DocumentWithVSId",
                "description": "矢量化后的文档"
            },
            "HTTPValidationError": {
                "properties": {
                    "detail": {
                        "items": {
                            "$ref": "#/components/schemas/ValidationError"
                        },
                        "type": "array",
                        "title": "Detail"
                    }
                },
                "type": "object",
                "title": "HTTPValidationError"
            },
            "History": {
                "properties": {
                    "role": {
                        "type": "string",
                        "title": "Role"
                    },
                    "content": {
                        "type": "string",
                        "title": "Content"
                    }
                },
                "type": "object",
                "required": [
                    "role",
                    "content"
                ],
                "title": "History",
                "description": "对话历史\n可从dict生成，如\nh = History(**{\"role\":\"user\",\"content\":\"你好\"})\n也可转换为tuple，如\nh.to_msy_tuple = (\"human\", \"你好\")"
            },
            "ListResponse": {
                "properties": {
                    "code": {
                        "type": "integer",
                        "title": "Code",
                        "description": "API status code",
                        "default": 200
                    },
                    "msg": {
                        "type": "string",
                        "title": "Msg",
                        "description": "API status message",
                        "default": "success"
                    },
                    "data": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "Data",
                        "description": "List of names"
                    }
                },
                "type": "object",
                "required": [
                    "data"
                ],
                "title": "ListResponse",
                "example": {
                    "code": 200,
                    "msg": "success",
                    "data": [
                        "doc1.docx",
                        "doc2.pdf",
                        "doc3.txt"
                    ]
                }
            },
            "ValidationError": {
                "properties": {
                    "loc": {
                        "items": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "integer"
                                }
                            ]
                        },
                        "type": "array",
                        "title": "Location"
                    },
                    "msg": {
                        "type": "string",
                        "title": "Message"
                    },
                    "type": {
                        "type": "string",
                        "title": "Error Type"
                    }
                },
                "type": "object",
                "required": [
                    "loc",
                    "msg",
                    "type"
                ],
                "title": "ValidationError"
            }
        }
    }
}